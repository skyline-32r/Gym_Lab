<%- include("../parts/html-head") %> <%- include("../parts/navbar") %>

<div class="container">
  <div class="row">
    <div class="col">
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            <li class="page-item <%= page==1 ? 'disabled' : '' %>">
                <a class="page-link" href="?page=<%= 1 %>">
                  <i class="fa-solid fa-angles-left"></i>
                </a>
              </li>
            <li class="page-item <%= page==1 ? 'disabled' : '' %>">
                <a class="page-link" href="?page=<%= page-1 %>">
                  <i class="fa-solid fa-angle-left"></i>
                </a>
              </li>
            <!-- if page + distance > totalPages
            pageLowerBound = 1
            pageUpperBound = 1 + distance*2
            if page - distance < 1
            pageLowerBound = totalPages - distance * 2
            pageUpperBound = totalPages -->
          <% for (let i=page-5; i<= page+5; i++) { if (i >= 1 && i <=
          totalPages) { %>
          <li class="page-item <%= (i == page) ? "active" : "" %>">
            <a class="page-link" href="?page=<%= i %>"><%= i %></a>
          </li>
          <% }} %>
          <li class="page-item <%= page==totalPages ? 'disabled' : '' %>">
                <a class="page-link" href="?page=<%= page+1 %>">
                  <i class="fa-solid fa-angles-right"></i>
                </a>
              </li>
            <li class="page-item <%= page==totalPages ? 'disabled' : '' %>">
                <a class="page-link" href="?page=<%= totalPages %>">
                  <i class="fa-solid fa-angles-right"></i>
                </a>
              </li>
        </ul>
      </nav>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <table class="table table-striped table-border">
        <thead>
          <tr>
            <th><i class="fa-solid fa-dumpster-fire"></i></th>
            <th>ID</th>
            <th>姓名</th>
            <th>郵件</th>
            <th>電話</th>
            <th>生日</th>
            <th>地址</th>
            <th><i class="fa-solid fa-pen-to-square"></i></th>
          </tr>
        </thead>
        <tbody>
          <% for (let row of rows) { %>
          <tr>
            <td><a href="/address-book/del/<%= row.sid %>" onClick="return confirm(`確定要刪除編號為 <%= row.sid %> 的資料嗎？`)"><i class="fa-solid fa-dumpster-fire text-primary"></i></a></td>
            <td><%= row.sid %></td>
            <td><%= row.name %></td>
            <td><%= row.email %></td>
            <td><%= row.mobile %></td>
            <td><%= row.birthday %></td>
            <td><%= row.address %></td>
            <td><a href=""><i class="fa-solid fa-pen-to-square text-primary"></i></a></td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<%- include("../parts/scripts") %> <%- include("../parts/html-footer") %>
